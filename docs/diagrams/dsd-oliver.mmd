                                                                                                                                                                                                           
 sequenceDiagram                                                                                                                                                                                           
     actor Kantineleder                                                                                                                                                                                    
     participant UI as CreateTask.razor                                                                                                                                                                    
     participant TaskService                                                                                                                                                                               
     participant UserService                                                                                                                                                                               
     participant EventService                                                                                                                                                                              
     participant TaskController                                                                                                                                                                            
     participant TaskRepository                                                                                                                                                                            
     participant UserRepository                                                                                                                                                                            
     participant EventRepository                                                                                                                                                                           
     participant MongoDB                                                                                                                                                                                   
                                                                                                                                                                                                           
     %% Trin 1: Start Opgave Oprettelse                                                                                                                                                                    
     Note over Kantineleder, UI: Trin 1: Start Opgave Oprettelse                                                                                                                                           
     Kantineleder->>UI: TilgÃ¥ opgave oprettelse                                                                                                                                                            
     UI->>UserService: Hent brugere og events                                                                                                                                                              
     UserService->>UserRepository: GetAllUsers()                                                                                                                                                           
     UserRepository->>MongoDB: Find(users)                                                                                                                                                                 
     MongoDB-->>UserRepository: Users collection                                                                                                                                                           
     UserRepository-->>UserService: List<User>                                                                                                                                                             
     UserService-->>UI: Returner brugerliste                                                                                                                                                               
     UI->>EventService: GetAllEvents()                                                                                                                                                                     
     EventService->>EventRepository: GetAllEvents()                                                                                                                                                        
     EventRepository->>MongoDB: Find(events)                                                                                                                                                               
     MongoDB-->>EventRepository: Events collection                                                                                                                                                         
     EventRepository-->>EventService: List<TaskEvent>                                                                                                                                                      
     EventService-->>UI: Returner eventliste                                                                                                                                                               
                                                                                                                                                                                                           
     %% Trin 2: Udfyld Opgave Information                                                                                                                                                                  
     Note over Kantineleder, UI: Trin 2: Udfyld Opgave Detaljer                                                                                                                                            
     Kantineleder->>UI: Udfyld titel, beskrivelse, dato, tid og status                                                                                                                                     
     Kantineleder->>UI: Tildel medarbejdere og events                                                                                                                                                      
                                                                                                                                                                                                           
     %% Trin 3: Gem Opgave                                                                                                                                                                                 
     Note over Kantineleder, TaskService: Trin 3: Gem Opgave                                                                                                                                               
     Kantineleder->>UI: Indsend opgave                                                                                                                                                                     
     UI->>TaskService: CreateTaskAsync(taskItem)                                                                                                                                                           
     TaskService->>TaskController: Create(taskItem)                                                                                                                                                        
     TaskController->>TaskRepository: SaveTask(taskItem)                                                                                                                                                   
     TaskRepository->>MongoDB: InsertOne(taskItem)                                                                                                                                                         
     MongoDB-->>TaskRepository: Confirmation                                                                                                                                                               
                                                                                                                                                                                                           
     alt Succes                                                                                                                                                                                            
         TaskRepository-->>TaskController: Return TaskItem                                                                                                                                                 
         TaskController-->>TaskService: Return TaskItem                                                                                                                                                    
         TaskService-->>UI: Success                                                                                                                                                                        
         UI-->>Kantineleder: Vis succes besked                                                                                                                                                             
     else Fejl                                                                                                                                                                                             
         MongoDB-->>TaskRepository: Error                                                                                                                                                                  
         TaskRepository-->>TaskController: Error                                                                                                                                                           
         TaskController-->>TaskService: Validation error                                                                                                                                                   
         TaskService-->>UI: Error                                                                                                                                                                          
         UI-->>Kantineleder: Vis fejl besked                                                                                                                                                               
     end     