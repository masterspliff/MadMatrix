@using webapp.Service
@using TaskStatus = core.Models.TaskStatus
@inject IUserService UserService
@inject ITaskService TaskService

    <h3>@Title</h3>
    @if (ShowData == true)
    {
        <p><strong>Status:</strong> @Status</p>
        <p><strong>Start Date:</strong> @StartTime</p>
        <p><strong>End Date:</strong> @EndTime</p>
        <p><strong>Assigned To:</strong></p>
            <div class="assigned-to">
                @foreach (var id in @AssignedTo)
                {
                // component that takes id and handles logic of displaying pfp and other info'
                <UserViewer userId="@id"/>
                }

        </div>
    }
    
    @if (ShowDescription == true)
    {
        
        <p><strong>Assigned To:</strong></p>
        <div class="assigned-to">
            @foreach (var id in @AssignedTo)
            {
                // component that takes id and handles logic of displaying pfp and other info'
                <UserViewer userId="@id"/>
            }
        </div>
        <p><strong>Description:</strong>@((MarkupString)markdownHtml)</p>
    }
    

    @code {
    //Import parameters from the Model(?)
    [Parameter] public int taskId { get; set; }
    [Parameter] public string Title { get; set; }
    [Parameter] public string Description { get; set; }
    [Parameter] public TaskStatus Status { get; set; }
    [Parameter] public DateTime Dato { get; set; }
    [Parameter] public TimeOnly StartTime { get; set; }
    [Parameter] public TimeOnly EndTime { get; set; }
    [Parameter] public List<int> AssignedTo { get; set; }
    
    // show/hide parameters
    [Parameter] public bool? ShowDescription { get; set; } = false;
    [Parameter] public bool? ShowData { get; set; } = false;

    MarkdownEditor Markdown1; 
    
    string markdownHtml;
    
    protected override void OnInitialized()
    {
        //replaced by markdown from the database (description)
        string markdownValue = Description;
        markdownHtml = Markdig.Markdown.ToHtml(markdownValue ?? string.Empty);
        base.OnInitialized();
    }
    

    }