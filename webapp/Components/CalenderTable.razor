<h3>CalenderTable</h3>

<div class="calendar-container-wrapper">
    <div class="calendar-container">
        <div class="calendar-header">
            <button @onclick="PreviousMonth">&lt;</button>
            <span>@($"{currentMonth:D2} / {currentYear}")</span>
            <button @onclick="NextMonth">&gt;</button>
        </div>
        <div class="calendar-grid">
            @foreach (var day in GetDaysOfWeekStartingMonday())
            {
            <div class="calendar-day-name">@GetShortDayName(day)</div>
            }

            @for (int i = 0; i < GetOffsetForFirstDay(); i++)
            {
            <div class="calendar-day empty"></div>
            }

            @for (int day = 1; day <= DaysInMonth; day++)
            {
            <div class="calendar-day @(selectedDay == day ? "selected" : "")" @onclick="() => SelectDay(day)">
                @day
            </div>
            }
        </div>
    </div>

    <div class="calendar-task">
        <p>Tasks for the selected day will be displayed here.</p>
    </div>
</div>

@code {                                                                                                                                                                                                                                                                                                                                                                    
     private int currentYear = DateTime.Now.Year;                                                                                                                                                                                                                                                                                                                           
     private int currentMonth = DateTime.Now.Month;                                                                                                                                                                                                                                                                                                                         
     private int selectedDay;                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                            
     private void PreviousMonth()                                                                                                                                                                                                                                                                                                                                           
     {                                                                                                                                                                                                                                                                                                                                                                      
         if (currentMonth == 1)                                                                                                                                                                                                                                                                                                                                             
         {                                                                                                                                                                                                                                                                                                                                                                  
             currentMonth = 12;                                                                                                                                                                                                                                                                                                                                             
             currentYear--;                                                                                                                                                                                                                                                                                                                                                 
         }                                                                                                                                                                                                                                                                                                                                                                  
         else                                                                                                                                                                                                                                                                                                                                                               
         {                                                                                                                                                                                                                                                                                                                                                                  
             currentMonth--;                                                                                                                                                                                                                                                                                                                                                
         }                                                                                                                                                                                                                                                                                                                                                                  
     }                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                            
     private void NextMonth()                                                                                                                                                                                                                                                                                                                                               
     {                                                                                                                                                                                                                                                                                                                                                                      
         if (currentMonth == 12)                                                                                                                                                                                                                                                                                                                                            
         {                                                                                                                                                                                                                                                                                                                                                                  
             currentMonth = 1;                                                                                                                                                                                                                                                                                                                                              
             currentYear++;                                                                                                                                                                                                                                                                                                                                                 
         }                                                                                                                                                                                                                                                                                                                                                                  
         else                                                                                                                                                                                                                                                                                                                                                               
         {                                                                                                                                                                                                                                                                                                                                                                  
             currentMonth++;                                                                                                                                                                                                                                                                                                                                                
         }                                                                                                                                                                                                                                                                                                                                                                  
     }                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                            
     private void SelectDay(int day)                                                                                                                                                                                                                                                                                                                                        
     {                                                                                                                                                                                                                                                                                                                                                                      
         selectedDay = day;                                                                                                                                                                                                                                                                                                                                                 
     }                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                            
     private int DaysInMonth => DateTime.DaysInMonth(currentYear, currentMonth);                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                            
     private IEnumerable<DayOfWeek> GetDaysOfWeekStartingMonday()                                                                                                                                                                                                                                                                                                           
     {                                                                                                                                                                                                                                                                                                                                                                      
         return new List<DayOfWeek>                                                                                                                                                                                                                                                                                                                                         
         {                                                                                                                                                                                                                                                                                                                                                                  
             DayOfWeek.Monday,                                                                                                                                                                                                                                                                                                                                              
             DayOfWeek.Tuesday,                                                                                                                                                                                                                                                                                                                                             
             DayOfWeek.Wednesday,                                                                                                                                                                                                                                                                                                                                           
             DayOfWeek.Thursday,                                                                                                                                                                                                                                                                                                                                            
             DayOfWeek.Friday,                                                                                                                                                                                                                                                                                                                                              
             DayOfWeek.Saturday,                                                                                                                                                                                                                                                                                                                                            
             DayOfWeek.Sunday                                                                                                                                                                                                                                                                                                                                               
         };                                                                                                                                                                                                                                                                                                                                                                 
     }                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                            
     private int GetOffsetForFirstDay()                                                                                                                                                                                                                                                                                                                                     
     {                                                                                                                                                                                                                                                                                                                                                                      
         int offset = ((int)FirstDayOfMonth - 1 + 7) % 7;                                                                                                                                                                                                                                                                                                                   
         return offset;                                                                                                                                                                                                                                                                                                                                                     
     }                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                            
     private DayOfWeek FirstDayOfMonth => new DateTime(currentYear, currentMonth, 1).DayOfWeek;                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                            
     private string GetShortDayName(DayOfWeek day)                                                                                                                                                                                                                                                                                                                          
     {                                                                                                                                                                                                                                                                                                                                                                      
         return day switch                                                                                                                                                                                                                                                                                                                                                  
         {                                                                                                                                                                                                                                                                                                                                                                  
             DayOfWeek.Monday => "Man",                                                                                                                                                                                                                                                                                                                                     
             DayOfWeek.Tuesday => "Tir",                                                                                                                                                                                                                                                                                                                                    
             DayOfWeek.Wednesday => "Ons",                                                                                                                                                                                                                                                                                                                                  
             DayOfWeek.Thursday => "Tor",                                                                                                                                                                                                                                                                                                                                   
             DayOfWeek.Friday => "Fre",                                                                                                                                                                                                                                                                                                                                     
             DayOfWeek.Saturday => "Lør",                                                                                                                                                                                                                                                                                                                                   
             DayOfWeek.Sunday => "Søn",                                                                                                                                                                                                                                                                                                                                     
             _ => string.Empty,                                                                                                                                                                                                                                                                                                                                             
         };                                                                                                                                                                                                                                                                                                                                                                 
     }                                                                                                                                                                                                                                                                                                                                                                      
 } 